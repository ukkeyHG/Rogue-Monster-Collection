# モンスターシステム仕様書

## 概要
モンスターデータは外部JSONファイル (`monsters.json`) で管理され、ゲーム開始時に非同期で読み込まれます。
各モンスターはステータス、スキル、捕獲率などのパラメータを持ちます。

## データ構造 (`monsters.json`)

各モンスターは一意のID（キー）を持ち、以下のプロパティで定義されます。

```json
"slime": {
  "name": "スライム",       // 表示名
  "emoji": "🟢",           // 表示アイコン
  "baseStats": {           // 基本ステータス
    "hp": 30,              // 現在HP（初期値）
    "maxHp": 30,           // 最大HP
    "atk": 5,              // 攻撃力
    "def": 3,              // 防御力
    "speed": 3             // 素早さ（行動順に影響）
  },
  "skills": [              // スキルリスト（通常2つ）
    {
      "name": "体当たり",   // スキル名
      "power": 1.0,        // 威力倍率（攻撃力 × power）
      "description": "通常の攻撃", // 説明文
      "accuracy": 0.95,    // 命中率 (0.0 - 1.0)
      "criticalRate": 0.05 // クリティカル率 (0.0 - 1.0)
    },
    {
      "name": "スライム弾",
      "power": 1.5,
      "description": "強力な攻撃",
      "accuracy": 0.85,
      "criticalRate": 0.10
    }
  ],
  "captureRate": 0.4,      // 捕獲成功率 (0.0 - 1.0)
  "expYield": 15,          // 倒した時に得られる経験値
  "rarity": "common"       // レアリティ (common, uncommon, rare, legendary)
}
```

## パラメータ詳細

### 基本ステータス (`baseStats`)
- **hp / maxHp**: 耐久力。0になると戦闘不能。
- **atk**: 物理攻撃力。ダメージ計算の基礎値。
- **def**: 物理防御力。受けるダメージを軽減。
- **speed**: 行動速度。高い方が先に行動できる確率が上がる。

### スキル (`skills`)
モンスターは複数のスキルを持ち、戦闘中にランダム（またはAIロジック）で使用します。
- **power**: ダメージ計算時の倍率。`ダメージ = (攻撃力 * power) - (防御力 / 2)` （概算）
- **accuracy**: 攻撃が命中する確率。
- **criticalRate**: ダメージが1.5倍になる確率。

### その他
- **captureRate**: プレイヤーが「捕獲」コマンドを使用した際の成功率基礎値。HPが減ると成功率は上昇する。
- **expYield**: プレイヤーのパーティが獲得する経験値。

## 拡張ガイド

### 新しいモンスターの追加
1. `monsters.json` に新しいエントリを追加します。
2. ユニークなID（例: `dragon_king`）を使用してください。
3. `emoji` は任意のUnicode絵文字が使用可能です。

### バランス調整
- **強いモンスター**: `baseStats` を高くし、`captureRate` を低く設定します。
- **レアモンスター**: `rarity` を `rare` や `legendary` に設定し、出現率（別途ロジックで制御）を調整します。
